# Rudis - A Redis-like Server in Rust

Rudis is a high-performance, Redis-compatible server implementation written in Rust. It aims to provide a drop-in replacement for Redis with improved performance and memory efficiency.

## Project Structure

### Core Source Code (`src/`)

The main source code is organized into modular components:

#### `src/main.rs`
- **Purpose**: Application entry point
- **Responsibilities**:
  - Initialize the server
  - Parse command-line arguments
  - Set up logging and configuration
  - Start the main server loop

#### `src/server/`
- **Purpose**: Core server logic and client management
- **Contents**:
  - `mod.rs`: Main server struct and lifecycle management
- **Responsibilities**:
  - Handle client connections
  - Manage server state
  - Coordinate between different components
  - Implement the main event loop

#### `src/commands/`
- **Purpose**: Redis command parsing and execution
- **Contents**:
  - `mod.rs`: Command definitions and parsing logic
- **Responsibilities**:
  - Parse incoming Redis protocol commands
  - Validate command syntax
  - Route commands to appropriate handlers
  - Implement command execution pipeline

#### `src/database/`
- **Purpose**: In-memory data store implementation
- **Contents**:
  - `mod.rs`: Core database struct and operations
- **Responsibilities**:
  - Store key-value data in memory
  - Implement basic CRUD operations
  - Handle data expiration
  - Provide thread-safe access

#### `src/persistence/`
- **Purpose**: Data persistence mechanisms
- **Contents**:
  - `mod.rs`: Persistence manager
- **Responsibilities**:
  - Implement Append-Only File (AOF) persistence
  - Handle snapshot/RDB creation
  - Manage data recovery on startup
  - Ensure data durability

#### `src/networking/`
- **Purpose**: Network communication layer
- **Contents**:
  - `mod.rs`: TCP listener and connection handling
- **Responsibilities**:
  - Accept incoming TCP connections
  - Handle the Redis protocol parsing
  - Manage connection pooling
  - Implement connection timeouts

#### `src/config/`
- **Purpose**: Configuration management
- **Contents**:
  - `mod.rs`: Configuration struct and loading
- **Responsibilities**:
  - Load configuration from files
  - Parse environment variables
  - Validate configuration values
  - Provide default settings

#### `src/data_structures/`
- **Purpose**: Redis data type implementations
- **Contents**:
  - `mod.rs`: Module declarations and re-exports
  - `string.rs`: String data type operations
  - `list.rs`: List data type operations
  - `hash.rs`: Hash/dictionary operations
  - `set.rs`: Set operations
  - `sorted_set.rs`: Sorted set with scoring
- **Responsibilities**:
  - Implement Redis data types (strings, lists, hashes, sets, sorted sets)
  - Provide type-specific operations
  - Handle memory management for each type
  - Ensure thread safety

### Configuration (`config/`)
- **Purpose**: Configuration files and templates
- **Contents**: Configuration files for different environments
- **Usage**: Contains default configs, development configs, production configs

### Documentation (`docs/`)
- **Purpose**: Project documentation
- **Contents**: Architecture docs, API references, design decisions
- **Usage**: Internal documentation for developers

### Scripts (`scripts/`)
- **Purpose**: Build, deployment, and utility scripts
- **Contents**:
  - Build scripts
  - Deployment automation
  - Development helpers
  - Performance testing scripts

### Benchmarks (`benchmarks/`)
- **Purpose**: Performance testing and benchmarking
- **Contents**:
  - Benchmark tests for different components
  - Performance comparison tools
  - Load testing scripts

### Tests (`tests/`)
- **Purpose**: Integration and end-to-end tests
- **Contents**:
  - Integration tests
  - End-to-end test scenarios
  - Performance tests
  - Compatibility tests

### Build Artifacts (`target/`)
- **Purpose**: Compiled binaries and intermediate build files
- **Contents**: Automatically generated by Cargo
- **Note**: Typically ignored in version control

## Architecture Overview

```
┌─────────────────┐    ┌─────────────────┐
│   Networking    │◄──►│     Server      │
│   (TCP/Redis    │    │   (Main Loop)   │
│    Protocol)    │    └─────────────────┘
└─────────────────┘            │
                               ▼
┌─────────────────┐    ┌─────────────────┐
│   Commands      │◄──►│   Database      │
│   (Parsing &    │    │   (In-Memory    │
│    Routing)     │    │     Store)      │
└─────────────────┘    └─────────────────┘
                               │
                               ▼
┌─────────────────┐    ┌─────────────────┐
│ Data Structures │    │  Persistence    │
│ (Strings, Lists,│    │   (AOF/RDB)     │
│  Hashes, Sets)  │    └─────────────────┘
└─────────────────┘
```

## Getting Started

1. **Clone the repository**
   ```bash
   git clone <repository-url>
   cd rudis
   ```

2. **Build the project**
   ```bash
   cargo build --release
   ```

3. **Run the server**
   ```bash
   cargo run
   ```

4. **Run tests**
   ```bash
   cargo test
   ```

## Development

- Use `cargo check` for quick compilation checks
- Run `cargo fmt` to format code
- Use `cargo clippy` for linting
- Add tests in the `tests/` directory
- Update documentation in `docs/`

## Contributing

1. Follow the existing code structure
2. Add tests for new features
3. Update documentation
4. Ensure code passes all checks

## License

[Add your license information here]
